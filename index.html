<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Cosmic Website</title>
    <!-- DM Sans Font from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Three.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        /* Custom CSS for DM Sans font and global styles */
        body {
            font-family: 'DM Sans', sans-serif; /* Apply DM Sans */
            overflow-x: hidden; /* Prevent horizontal scroll due to animations */
            scroll-behavior: smooth; /* Smooth scrolling for anchor links */
            background-color: #1a082b; /* Dark space background for the entire body */
            position: relative; /* Needed for fixed canvas positioning */
        }

        /* Marquee Effect */
        .marquee-container {
            overflow: hidden;
            white-space: nowrap;
            box-sizing: border-box;
            width: 100%;
            display: inline-block; /* Essential for animation */
        }

        .marquee-content {
            display: inline-block;
            padding-left: 100%; /* Start off-screen */
            animation: marquee 15s linear infinite; /* Adjust duration for speed */
        }

        @keyframes marquee {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }

        /* Full-page Three.js canvas */
        .threejs-canvas {
            position: fixed; /* Fixed to cover the entire viewport */
            top: 0;
            left: 0;
            width: 100vw; /* Viewport width */
            height: 100vh; /* Viewport height */
            display: block;
            z-index: -1; /* Place it behind all content */
        }

        /* Hero section content container */
        .hero-content-wrapper {
            position: relative; /* Stacks above the canvas */
            z-index: 10; /* Ensure content is on top */
            min-height: 500px; /* Ensures enough space for hero content */
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
            padding: 2rem;
            max-width: 90%;
            margin: 0 auto; /* Center the hero content */
        }

        /* Modal Styles (kept for general action modal) */
        .modal {
            display: none; /* Hidden by default */
            position: fixed;
            z-index: 10000; /* High z-index to appear on top */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7); /* Darker overlay */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #2d1a42; /* Space-themed modal background */
            margin: auto;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2 px 4px -1px rgba(0, 0, 0, 0.1);
            max-width: 90%;
            width: 400px;
            text-align: center;
            color: #e0e0e0; /* Light text for modal */
            transform: translateY(-50px); /* Initial offset for animation */
            opacity: 0; /* Start invisible */
            animation: modalFadeIn 0.3s ease-out forwards;
        }

        @keyframes modalFadeIn {
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .close-button {
            float: right;
            font-size: 28px;
            font-weight: bold;
            color: #888;
            cursor: pointer;
        }

        .close-button:hover,
        .close-button:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }

        /* Section transition effect */
        .content-section {
            display: none; /* Hidden by default */
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            position: relative; /* Ensure content sections stack above canvas */
            z-index: 10; /* Higher than canvas */
            text-align: center; /* Explicitly center text within content sections */
        }

        .content-section.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* Space-ey Color Palette */
        /* Increased contrast for main text colors */
        .bg-space-dark { background-color: #1a082b; } /* Very dark purple-blue */
        .bg-space-medium { background-color: #2d1a42; } /* Slightly lighter purple-blue */
        .bg-space-light { background-color: #402c58; } /* Even lighter purple-blue */
        .text-star-light { color: #f0f0f0; } /* Brighter off-white for general text */
        .text-star-medium { color: #d0d0d0; } /* Slightly darker off-white for secondary text */
        .text-accent-purple { color: #bb86fc; } /* Bright purple accent */
        .text-accent-blue { color: #82aaff; } /* Bright blue accent */
        .border-accent-purple { border-color: #bb86fc; }
        .hover\:bg-accent-purple:hover { background-color: #bb86fc; }
        .hover\:text-accent-purple:hover { color: #bb86fc; }
        .hover\:bg-accent-blue:hover { background-color: #82aaff; }
        .hover\:text-accent-blue:hover { color: #82aaff; }

        /* Custom button styling for glowing effect */
        .button-glow {
            position: relative;
            z-index: 1;
            overflow: hidden;
            border: none; /* Remove default button border */
            cursor: pointer; /* Indicate interactivity */
        }
        .button-glow::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300%;
            height: 300%;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 70%);
            transition: all 0.5s ease-out;
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
            z-index: -1;
        }
        .button-glow:hover::before {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }

        /* Additional enhancements */
        .h1-glow {
            text-shadow: 0 0 8px rgba(187, 134, 252, 0.7), 0 0 15px rgba(130, 170, 255, 0.5); /* Subtle glow for H1 */
        }

        /* Dropdown menu specific styles */
        .dropdown {
            position: relative;
            display: inline-block; /* For positioning dropdown relative to its parent */
        }

        .dropdown-content {
            display: none; /* Hidden by default */
            position: absolute;
            background-color: #2d1a42; /* Medium space background */
            min-width: 160px;
            box-shadow: 0 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1; /* Ensure it's above other content */
            border-radius: 8px;
            overflow: hidden; /* For rounded corners on children */
            top: calc(100% + 8px); /* Position below the nav link, with some gap */
            left: 50%; /* Center horizontally */
            transform: translateX(-50%); /* Adjust for centering */
            padding: 8px 0; /* Vertical padding inside dropdown */
        }

        .dropdown-content a {
            color: #d0d0d0; /* text-star-medium */
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            text-align: left;
            transition: background-color 0.2s ease;
        }

        .dropdown-content a:hover {
            background-color: #402c58; /* bg-space-light */
            color: #f0f0f0; /* text-star-light */
        }

        /* Show the dropdown menu on hover */
        .dropdown:hover .dropdown-content {
            display: block;
        }

        /* Quiz Page Specific Styles (integrated into main flow) */
        .quiz-page-container {
            background: linear-gradient(to bottom right, #0F0022, #2A0050, #001040); /* Deep space gradient */
            color: #E0E7FF; /* Light blue-ish white for text */
            padding: 20px;
            border-radius: 20px; /* More rounded */
            border: 2px solid #6D28D9;
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.5); /* Glow effect */
            overflow-y: auto; /* Enable scrolling for long quizzes */
            margin-top: 2rem; /* Add some space from surrounding content */
            margin-bottom: 2rem;
            max-width: 800px; /* Wider for quiz content */
            display: flex;
            flex-direction: column;
            align-items: center; /* Center content horizontally within the flex container */
            text-align: center; /* Center text within this container */
        }

        /* Specific input styling for better visibility and aesthetics */
        .quiz-page-container input[type="radio"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 1.25rem; /* 20px */
            height: 1.25rem; /* 20px */
            border-radius: 50%;
            border: 2px solid #6D28D9; /* Purple border */
            background-color: #1A0033; /* Dark background for unselected */
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            position: relative;
            flex-shrink: 0; /* Prevent shrinking in flex container */
        }

        .quiz-page-container input[type="radio"]:checked {
            background-color: #8B5CF6; /* Lighter purple when checked */
            border-color: #8B5CF6; /* Border matches fill */
        }

        .quiz-page-container input[type="radio"]:checked::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 0.5rem; /* 8px */
            height: 0.5rem; /* 8px */
            border-radius: 50%;
            background-color: #FFFFFF; /* White dot inside */
        }

        .quiz-page-container input[type="radio"]:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.5); /* Focus ring */
        }

        /* Style for options label to align text with radio button */
        .quiz-page-container label {
            display: flex;
            align-items: center;
            gap: 10px; /* Space between radio button and text */
            cursor: pointer;
            text-align: left; /* Align label text to left */
        }

        .question-card {
            background-color: rgba(30, 0, 60, 0.8); /* Slightly lighter purple tint for cards */
            backdrop-filter: blur(5px); /* Subtle blur effect */
            width: 100%; /* Ensure question card fills its container */
            text-align: left; /* Align question text to left within its card */
        }

        .question-card .options {
            text-align: left; /* Ensure options remain left-aligned */
        }

        .submit-button {
            background: linear-gradient(to right, #8B5CF6, #B088FF); /* Gradient button */
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .submit-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
        }

        /* Custom scrollbar for better aesthetics within modal if needed */
        .quiz-page-container::-webkit-scrollbar {
            width: 8px;
        }
        .quiz-page-container::-webkit-scrollbar-track {
            background: #1A0033;
            border-radius: 10px;
        }
        .quiz-page-container::-webkit-scrollbar-thumb {
            background: #6D28D9;
            border-radius: 10px;
        }
        .quiz-page-container::-webkit-scrollbar-thumb:hover {
            background: #8B5CF6;
        }

        /* Announcement Banner Styles */
        .announcement-banner {
            background-color: #eab308; /* Yellow-500 from Tailwind */
            color: #1a202c; /* Dark text for contrast */
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            font-weight: bold;
            font-size: 1.1rem;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 60; /* Higher than nav bar */
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            flex-wrap: wrap; /* Allow wrapping on small screens */
        }
        .announcement-banner button {
            background-color: #1a202c; /* Dark button */
            color: #eab308; /* Yellow text */
            padding: 0.5rem 1.25rem;
            border-radius: 9999px; /* Fully rounded */
            font-weight: bold;
            transition: background-color 0.3s ease;
        }
        .announcement-banner button:hover {
            background-color: #4a5568; /* Darker hover */
        }
    </style>
</head>
<body class="bg-space-dark text-star-light">

    <!-- Background Music -->
    <audio id="backgroundMusic" loop autoplay>
        <source src="https://dl.dropboxusercontent.com/scl/fi/dkrs0oc0jvtg9xghqye8l/inspiring-cinematic-ambient-255033.mp3?rlkey=42pu1bucaixq9ncgfq5wdo2qp&e=1&st=qf8fyjbk" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- Announcement Banner -->
    <div class="announcement-banner" id="quizAnnouncementBanner">
        <span>Blast Off With This Planet Trivia Quiz!!!</span>
        <button id="openQuizBtn">Are you ready?</button>
    </div>

    <!-- Full-page Three.js Canvas for stars -->
    <canvas id="threeJsCanvas" class="threejs-canvas"></canvas>

    <!-- Navigation Bar -->
    <nav class="bg-gray-900 shadow-lg py-4 px-6 rounded-b-lg sticky top-0 z-50">
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center">
            <!-- Logo/Site Title with Marquee Effect -->
            <a href="#home" class="text-2xl font-bold text-accent-purple mb-4 md:mb-0 marquee-container nav-link">
                <span class="marquee-content">My Cosmic Website &bull; Explore &bull; Create &bull; Innovate &bull;</span>
            </a>

            <!-- Navigation Links -->
            <div class="flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-8">
                <a href="#home" class="nav-link text-star-medium hover:text-accent-blue font-medium rounded-md px-3 py-2 transition duration-300 ease-in-out">Home</a>
                <a href="#about" class="nav-link text-star-medium hover:text-accent-blue font-medium rounded-md px-3 py-2 transition duration-300 ease-in-out">About Us</a>

                <!-- Planets Dropdown -->
                <div class="dropdown">
                    <a href="#" class="nav-link text-star-medium hover:text-accent-blue font-medium rounded-md px-3 py-2 transition duration-300 ease-in-out">
                        Planets
                        <svg class="inline-block w-4 h-4 ml-1 -mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </a>
                    <div class="dropdown-content">
                        <a href="#mercury-section" class="nav-link">Mercury</a>
                        <a href="#venus-section" class="nav-link">Venus</a>
                        <a href="#earth-section" class="nav-link">Earth</a>
                        <a href="#mars-section" class="nav-link">Mars</a>
                        <a href="#jupiter-section" class="nav-link">Jupiter</a>
                        <a href="#saturn-section" class="nav-link">Saturn</a>
                        <a href="#uranus-section" class="nav-link">Uranus</a>
                        <a href="#neptune-section" class="nav-link">Neptune</a>
                    </div>
                </div>
                <a href="#contact" class="nav-link text-star-medium hover:text-accent-blue font-medium rounded-md px-3 py-2 transition duration-300 ease-in-out">Contact</a>
            </div>

            <!-- Call to Action Button (optional) -->
            <button id="signUpBtn" class="bg-accent-purple hover:bg-opacity-90 text-white font-semibold py-2 px-6 rounded-lg shadow-md transition duration-300 ease-in-out mt-4 md:mt-0 button-glow">
                Sign Up
            </button>
        </div>
    </nav>

    <!-- Main Content Area - Contains all sections -->
    <main class="container mx-auto px-4 py-8">
        <!-- Home Section -->
        <section id="home-section" class="content-section active">
            <header class="text-star-light rounded-lg m-4 shadow-xl hero-content-wrapper">
                <div class="max-w-4xl mx-auto">
                    <h1 class="text-4xl md:text-6xl font-extrabold leading-tight mb-6 h1-glow">
                        Explore the Digital Cosmos.
                    </h1>
                    <p class="text-lg md:text-xl mb-10 max-w-2xl mx-auto text-star-medium">
                        Journey through a universe of innovation, where your ideas shine like a billion stars.
                    </p>
                    <div class="flex justify-center space-x-4">
                        <button id="getStartedBtn" class="bg-white text-gray-900 hover:bg-gray-200 font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 ease-in-out button-glow">
                            Commence Mission
                        </button>
                        <button id="learnMoreBtn" class="border border-accent-blue text-white hover:bg-accent-blue hover:text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 ease-in-out button-glow">
                            Learn About Nebulas
                        </button>
                    </div>
                </div>
            </header>

            <!-- Features Section (now integrated into Home/About, but keeping ID for compatibility) -->
            <section id="features-section-inner" class="py-16 px-6 bg-space-medium rounded-lg shadow-lg my-8">
                <div class="container mx-auto text-center">
                    <h2 class="text-3xl md:text-4xl font-bold mb-12 text-accent-purple">Cosmic Capabilities Await</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <div class="bg-space-light rounded-xl shadow-lg p-8 transform hover:scale-105 transition duration-300 ease-in-out">
                            <div class="text-accent-blue mb-4">
                                <svg class="h-10 w-10 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-1.75-3M13.5 10H15a1 1 0 011 1v6h-4v-6a1 1 0 011-1zm-3 0V7a1 1 0 011-1h2a1 1 0 011 1v3"></path>
                                </svg>
                            </div>
                            <h3 class="text-xl font-semibold mb-4 text-star-light">Stellar Design</h3>
                            <p class="text-star-medium">
                                Our platform is meticulously crafted to offer an out-of-this-world user experience.
                            </p>
                        </div>
                        <div class="bg-space-light rounded-xl shadow-lg p-8 transform hover:scale-105 transition duration-300 ease-in-out">
                            <div class="text-accent-purple mb-4">
                                <svg class="h-10 w-10 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                </svg>
                            </div>
                            <h3 class="text-xl font-semibold mb-4 text-star-light">Warp Speed Performance</h3>
                            <p class="text-star-medium">
                                Experience incredible speeds and seamless interactions across the digital galaxy.
                            </p>
                        </div>
                        <div class="bg-space-light rounded-xl shadow-lg p-8 transform hover:scale-105 transition duration-300 ease-in-out">
                            <div class="text-red-400 mb-4">
                                <svg class="h-10 w-10 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-2 4h4m-4-7h4M3 12h18M6 4h12a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2zm0 0V4m0 0H6"></path>
                                </svg>
                            </div>
                            <h3 class="text-xl font-semibold mb-4 text-star-light">Galactic Support</h3>
                            <p class="text-star-medium">
                                Our dedicated crew is ready to assist you on your interstellar journey, day or night.
                            </p>
                        </div>
                    </div>
                </div>
            </section>
        </section>

        <!-- About Us Section -->
        <section id="about" class="content-section py-16 px-6 bg-space-medium rounded-lg shadow-lg my-8">
            <div class="container mx-auto text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-8 text-accent-purple">About Our Constellation</h2>
                <p class="text-lg text-star-medium mb-6 max-w-3xl mx-auto">
                    **Who we are:** We are Gemini Voyages, a luxury intergalactic airline which is your 1# go-to shuttle for venturing through the vast expanse of cosmos which is our Solar System. We provide flights to a wide variety of destinations, including to/from Mercury, Venus, Earth, Mars, Jupiter, Saturn, Uranus, and Neptune.
                </p>
                <p class="text-star-medium max-w-3xl mx-auto">
                    We are offering this service after our successful mission last year; in which our crew developed a database of safe planets; based on distance from earth, gravitational strength, surface pressure, and chemical makeup of the atmosphere.
                </p>
                <h3 class="text-2xl font-bold mt-10 mb-4 text-accent-purple">Cost</h3>
                <p class="text-lg text-star-medium mb-6 max-w-3xl mx-auto">
                    The cost of the trip depends on the accommodation, food, planet to travel to, etc, as shown by the spreadsheet below:
                </p>
                <!-- Placeholder for spreadsheet, which would be dynamically loaded or an image -->
                <div class="bg-space-light p-6 rounded-lg shadow-inner text-star-medium max-w-md mx-auto">
                    <p class="font-bold mb-2">Spreadsheet Placeholder:</p>
                    <p>*(Imagine a detailed spreadsheet of costs here, varying by destination and amenities.)*</p>
                    <p>For detailed pricing, please contact our booking specialists!</p>
                </div>

                <div class="mt-10 flex flex-wrap justify-center gap-6">
                    <div class="p-6 bg-space-light rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 border-l-4 border-accent-blue">
                        <h4 class="text-xl font-semibold text-accent-blue mb-2">Our Galactic Vision</h4>
                        <p class="text-star-medium">To be the guiding star for creativity and innovation in the digital universe.</p>
                    </div>
                    <div class="p-6 bg-space-light rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 border-l-4 border-accent-purple">
                        <h4 class="text-xl font-semibold text-accent-purple mb-2">Our Core Elements</h4>
                        <p class="text-star-medium">Integrity, Innovation, User-Centricity.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Planet Sections -->
        <section id="mercury-section" class="content-section py-16 px-6 bg-space-medium rounded-lg shadow-lg my-8">
            <div class="container mx-auto text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-8 text-accent-blue">Destination: Mercury</h2>
                <p class="text-lg text-star-medium">Explore the closest planet to the sun. A world of extremes!</p>
                <img src="https://placehold.co/400x300/2d1a42/f0f0f0?text=Mercury+Image" alt="Mercury" class="mx-auto mt-8 rounded-lg shadow-md">
            </div>
        </section>

        <section id="venus-section" class="content-section py-16 px-6 bg-space-medium rounded-lg shadow-lg my-8">
            <div class="container mx-auto text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-8 text-accent-blue">Destination: Venus</h2>
                <p class="text-lg text-star-medium">Discover the scorching hot sister planet of Earth, shrouded in dense clouds.</p>
                <img src="https://placehold.co/400x300/2d1a42/f0f0f0?text=Venus+Image" alt="Venus" class="mx-auto mt-8 rounded-lg shadow-md">
            </div>
        </section>

        <section id="earth-section" class="content-section py-16 px-6 bg-space-medium rounded-lg shadow-lg my-8">
            <div class="container mx-auto text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-8 text-accent-blue">Destination: Earth</h2>
                <p class="text-lg text-star-medium">Return to the lush blue marble, home to diverse life and breathtaking views.</p>
                <img src="https://placehold.co/400x300/2d1a42/f0f0f0?text=Earth+Image" alt="Earth" class="mx-auto mt-8 rounded-lg shadow-md">
            </div>
        </section>

        <section id="mars-section" class="content-section py-16 px-6 bg-space-medium rounded-lg shadow-lg my-8">
            <div class="container mx-auto text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-8 text-accent-blue">Destination: Mars</h2>
                <p class="text-lg text-star-medium">Journey to the Red Planet, a frontier for human exploration and discovery.</p>
                <img src="https://placehold.co/400x300/2d1a42/f0f0f0?text=Mars+Image" alt="Mars" class="mx-auto mt-8 rounded-lg shadow-md">
            </div>
        </section>

        <section id="jupiter-section" class="content-section py-16 px-6 bg-space-medium rounded-lg shadow-lg my-8">
            <div class="container mx-auto text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-8 text-accent-blue">Destination: Jupiter</h2>
                <p class="text-lg text-star-medium">Witness the majesty of the Solar System's giant, with its swirling storms and vibrant bands.</p>
                <img src="https://placehold.co/400x300/2d1a42/f0f0f0?text=Jupiter+Image" alt="Jupiter" class="mx-auto mt-8 rounded-lg shadow-md">
            </div>
        </section>

        <section id="saturn-section" class="content-section py-16 px-6 bg-space-medium rounded-lg shadow-lg my-8">
            <div class="container mx-auto text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-8 text-accent-blue">Destination: Saturn</h2>
                <p class="text-lg text-star-medium">Behold the iconic ringed jewel of our cosmic neighborhood.</p>
                <img src="https://placehold.co/400x300/2d1a42/f0f0f0?text=Saturn+Image" alt="Saturn" class="mx-auto mt-8 rounded-lg shadow-md">
            </div>
        </section>

        <section id="uranus-section" class="content-section py-16 px-6 bg-space-medium rounded-lg shadow-lg my-8">
            <div class="container mx-auto text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-8 text-accent-blue">Destination: Uranus</h2>
                <p class="text-lg text-star-medium">Encounter the enigmatic ice giant, known for its unique axial tilt.</p>
                <img src="https://placehold.co/400x300/2d1a42/f0f0f0?text=Uranus+Image" alt="Uranus" class="mx-auto mt-8 rounded-lg shadow-md">
            </div>
        </section>

        <section id="neptune-section" class="content-section py-16 px-6 bg-space-medium rounded-lg shadow-lg my-8">
            <div class="container mx-auto text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-8 text-accent-blue">Destination: Neptune</h2>
                <p class="text-lg text-star-medium">Journey to the farthest known planet, a distant world of fierce winds.</p>
                <img src="https://placehold.co/400x300/2d1a42/f0f0f0?text=Neptune+Image" alt="Neptune" class="mx-auto mt-8 rounded-lg shadow-md">
            </div>
        </section>

        <!-- Quiz Page Section -->
        <section id="quiz-page-section" class="content-section py-16 px-6 bg-space-medium rounded-lg shadow-lg my-8 flex justify-center items-center">
            <div class="quiz-page-container w-full">
                <h1 class="text-4xl md:text-5xl font-bold text-center mb-8 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400 drop-shadow-lg animate-pulse">
                    Planet Trivia Quiz!
                </h1>

                <div id="quiz-container" class="space-y-6 w-full max-w-xl mx-auto">
                    <!-- Questions will be loaded here by JavaScript -->
                </div>

                <div class="flex justify-center mt-8">
                    <button id="submit-quiz-btn" class="submit-button text-white font-bold py-3 px-8 rounded-full text-lg shadow-lg focus:outline-none focus:ring-4 focus:ring-blue-300 transform active:scale-95 transition-all duration-200 ease-in-out">
                        Submit Quiz
                    </button>
                </div>

                <div id="results-container" class="mt-10 p-6 bg-purple-900 bg-opacity-70 rounded-2xl shadow-xl hidden border border-purple-700 w-full max-w-xl mx-auto">
                    <h2 class="text-3xl font-semibold text-center mb-4 text-transparent bg-clip-text bg-gradient-to-r from-green-300 to-cyan-300">
                        Your Results
                    </h2>
                    <p id="score-display" class="text-xl text-center mb-6 text-gray-200">
                        You scored: <span class="font-bold text-yellow-300"></span>
                    </p>
                    <div id="feedback-details" class="space-y-4">
                        <!-- Detailed feedback will go here -->
                    </div>
                    <div class="flex justify-center mt-6">
                        <button id="retake-quiz-btn" class="submit-button text-white font-bold py-2 px-6 rounded-full text-md shadow-lg focus:outline-none focus:ring-4 focus:ring-blue-300 transform active:scale-95 transition-all duration-200 ease-in-out">
                            Retake Quiz
                        </button>
                    </div>
                </div>
            </div>
        </section>


        <!-- Contact Section -->
        <section id="contact" class="content-section py-16 px-6 bg-space-medium rounded-lg shadow-lg my-8">
            <div class="container mx-auto text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-8 text-accent-purple">Contact Our Command Center</h2>
                <p class="text-lg text-star-medium mb-8 max-w-2xl mx-auto">
                    Have a query or wish to send a transmission? Our cosmic communications are open!
                </p>
                <form class="max-w-md mx-auto text-left space-y-6">
                    <div>
                        <label for="name" class="block text-star-medium text-sm font-bold mb-2">Name:</label>
                        <input type="text" id="name" name="name" class="shadow-sm appearance-none border border-gray-700 bg-gray-900 rounded-lg w-full py-3 px-4 text-star-light leading-tight focus:outline-none focus:ring-2 focus:ring-accent-blue focus:border-transparent" placeholder="Your Interstellar Name">
                    </div>
                    <div>
                        <label for="email" class="block text-star-medium text-sm font-bold mb-2">Email:</label>
                        <input type="email" id="email" name="email" class="shadow-sm appearance-none border border-gray-700 bg-gray-900 rounded-lg w-full py-3 px-4 text-star-light leading-tight focus:outline-none focus:ring-2 focus:ring-accent-blue focus:border-transparent" placeholder="your@cosmic-address.com">
                    </div>
                    <div>
                        <label for="message" class="block text-star-medium text-sm font-bold mb-2">Message:</label>
                        <textarea id="message" name="message" rows="5" class="shadow-sm appearance-none border border-gray-700 bg-gray-900 rounded-lg w-full py-3 px-4 text-star-light leading-tight focus:outline-none focus:ring-2 focus:ring-accent-blue focus:border-transparent resize-y" placeholder="Your Message to the Stars"></textarea>
                    </div>
                    <button type="submit" class="w-full bg-accent-purple hover:bg-opacity-90 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out button-glow">
                        Send Transmission
                    </button>
                </form>
                <div class="mt-10 text-star-medium">
                    <p>Or find us orbiting on social media:</p>
                    <div class="flex justify-center space-x-6 mt-4">
                        <a href="#" class="text-accent-blue hover:text-accent-purple transition duration-300 ease-in-out">Facebook</a>
                        <a href="#" class="text-accent-blue hover:text-accent-purple transition duration-300 ease-in-out">Twitter</a>
                        <a href="#" class="text-accent-blue hover:text-accent-purple transition duration-300 ease-in-out">LinkedIn</a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-star-medium py-10 px-6 rounded-t-lg mt-8">
        <div class="container mx-auto text-center">
            <p class="text-lg mb-4">&copy; 2025 My Cosmic Website. All rights reserved.</p>
            <div class="flex justify-center space-x-6">
                <a href="#" class="text-star-medium hover:text-star-light transition duration-300 ease-in-out">Privacy Protocols</a>
                <a href="#" class="text-star-medium hover:text-star-light transition duration-300 ease-in-out">Terms of Engagement</a>
                <a href="#" class="text-star-medium hover:text-star-light transition duration-300 ease-in-out">Starmap</a>
            </div>
        </div>
    </footer>

    <!-- Main site general modal for button clicks -->
    <div id="actionModal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button" id="closeModalBtn">&times;</span>
            <h3 class="text-2xl font-bold mb-4 text-star-light" id="modalTitle"></h3>
            <p class="text-star-medium mb-6" id="modalMessage"></p>
            <button class="bg-accent-purple hover:bg-opacity-90 text-white font-semibold py-2 px-6 rounded-lg shadow-md transition duration-300 ease-in-out button-glow">
                Proceed
            </button>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Get all interactive elements
            const signUpBtn = document.getElementById('signUpBtn');
            const getStartedBtn = document.getElementById('getStartedBtn');
            const learnMoreBtn = document.getElementById('learnMoreBtn');
            const navLinks = document.querySelectorAll('.nav-link');
            const allContentSections = document.querySelectorAll('.content-section');

            // Main site general modal elements
            const actionModal = document.getElementById('actionModal');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const modalOkBtn = actionModal.querySelector('button'); // Get the 'Proceed' button
            const modalTitle = document.getElementById('modalTitle');
            const modalMessage = document.getElementById('modalMessage');

            // Quiz elements (now targeting elements within the quiz-page-section)
            const quizAnnouncementBanner = document.getElementById('quizAnnouncementBanner');
            const openQuizBtn = document.getElementById('openQuizBtn');
            const quizPageSection = document.getElementById('quiz-page-section'); // The new full-page quiz section
            const quizContainer = quizPageSection.querySelector('#quiz-container'); // Scope to quizPageSection
            const submitQuizButton = quizPageSection.querySelector('#submit-quiz-btn'); // Use specific ID
            const resultsContainer = quizPageSection.querySelector('#results-container'); // Scope to quizPageSection
            const scoreDisplay = resultsContainer.querySelector('#score-display span'); // Scope to resultsContainer
            const feedbackDetails = resultsContainer.querySelector('#feedback-details'); // Scope to resultsContainer
            const retakeQuizButton = resultsContainer.querySelector('#retake-quiz-btn'); // Use specific ID

            // Audio element
            const backgroundMusic = document.getElementById('backgroundMusic');

            // Quiz Questions Data
            const quizQuestions = [
                {
                    question: "1. Which planet is known as the 'Red Planet'?",
                    options: ["a) Venus", "b) Mars", "c) Jupiter", "d) Saturn"],
                    answer: "b) Mars"
                },
                {
                    question: "2. What is the largest planet in our solar system?",
                    options: ["a) Earth", "b) Neptune", "c) Jupiter", "d) Uranus"],
                    answer: "c) Jupiter"
                },
                {
                    question: "3. Which planet is closest to the Sun?",
                    options: ["a) Earth", "b) Venus", "c) Mercury", "d) Mars"],
                    answer: "c) Mercury"
                },
                {
                    question: "4. Which planet is famous for its prominent ring system?",
                    options: ["a) Jupiter", "b) Uranus", "c) Neptune", "d) Saturn"],
                    answer: "d) Saturn"
                },
                {
                    question: "5. How many moons does Earth have?",
                    options: ["a) Zero", "b) One", "c) Two", "d) Five"],
                    answer: "b) One"
                },
                {
                    question: "6. Which planet is known as Earth's 'sister planet' due to its similar size and composition?",
                    options: ["a) Mars", "b) Venus", "c) Mercury", "d) Jupiter"],
                    answer: "b) Venus"
                },
                {
                    question: "7. What is the coldest planet in our solar system?",
                    options: ["a) Mars", "b) Uranus", "c) Neptune", "d) Pluto (though no longer classified as a planet, it's often associated with this title)"],
                    answer: "c) Neptune"
                },
                {
                    question: "8. Which planet has the 'Great Red Spot,' a giant storm larger than Earth?",
                    options: ["a) Mars", "b) Saturn", "c) Jupiter", "d) Neptune"],
                    answer: "c) Jupiter"
                },
                {
                    question: "9. Which is the only planet in our solar system not named after a god or goddess?",
                    options: ["a) Mars", "b) Earth", "c) Venus", "d) Jupiter"],
                    answer: "b) Earth"
                },
                {
                    question: "10. Which planet rotates on its side, almost at a 90-degree angle to its orbit?",
                    options: ["a) Mars", "b) Saturn", "c) Uranus", "d) Neptune"],
                    answer: "c) Uranus"
                },
                {
                    question: "11. Which planet is known for having the most extreme temperature swings between day and night?",
                    options: ["a) Venus", "b) Mars", "c) Mercury", "d) Earth"],
                    answer: "c) Mercury"
                },
                {
                    question: "12. What is the most volcanically active body in our solar system (besides the Sun)?",
                    options: ["a) Earth", "b) Mars", "c) Io (moon of Jupiter)", "d) Venus"],
                    answer: "c) Io (moon of Jupiter)"
                },
                {
                    question: "13. Which gas makes up the majority of Jupiter's atmosphere?",
                    options: ["a) Oxygen", "b) Nitrogen", "c) Hydrogen", "d) Carbon Dioxide"],
                    answer: "c) Hydrogen"
                },
                {
                    question: "14. Which planet has a day that is longer than its year?",
                    options: ["a) Earth", "b) Mars", "c) Venus", "d) Mercury"],
                    answer: "c) Venus"
                },
                {
                    question: "15. Besides Earth, which planet is considered the most likely to harbor life due to the potential presence of liquid water?",
                    options: ["a) Venus", "b) Jupiter", "c) Mars", "d) Saturn"],
                    answer: "c) Mars"
                },
                {
                    question: "16. Which of the following is an inner, rocky planet?",
                    options: ["a) Jupiter", "b) Saturn", "c) Neptune", "d) Mars"],
                    answer: "d) Mars"
                },
                {
                    question: "17. Which planet has the most extensive system of rings, composed of countless ice particles?",
                    options: ["a) Jupiter", "b) Uranus", "c) Saturn", "d) Neptune"],
                    answer: "c) Saturn"
                },
                {
                    question: "18. What phenomenon causes Venus to be the hottest planet, despite not being the closest to the Sun?",
                    options: ["a) Its rapid rotation", "b) Its strong magnetic field", "c) A runaway greenhouse effect", "d) Its proximity to a black hole"],
                    answer: "c) A runaway greenhouse effect"
                },
                {
                    question: "19. Which of these planets is an ice giant?",
                    options: ["a) Jupiter", "b) Saturn", "c) Uranus", "d) Mars"],
                    answer: "c) Uranus"
                },
                {
                    question: "20. What is the name of the largest moon of Saturn, known for having a dense atmosphere and lakes of liquid methane?",
                    options: ["a) Europa", "b) Ganymede", "c) Titan", "d) Triton"],
                    answer: "c) Titan"
                }
            ];


            // Function to show the general action modal
            const showActionModal = (title, message) => {
                modalTitle.textContent = title;
                modalMessage.textContent = message;
                actionModal.classList.remove('hidden'); // Show the modal
            };

            // Function to hide the general action modal
            const hideActionModal = () => {
                actionModal.classList.add('hidden'); // Hide the modal
            };

            // Function to show a specific content section and hide others
            const showSection = (sectionId) => {
                allContentSections.forEach(section => {
                    section.classList.remove('active');
                });
                const targetSection = document.getElementById(sectionId);
                if (targetSection) {
                    targetSection.classList.add('active');
                    // Scroll to the top of the section for better UX
                    targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            };

            // Initial section display
            showSection('home-section'); // Show home by default

            // Event Listeners for main site Buttons
            if (signUpBtn) {
                signUpBtn.addEventListener('click', () => {
                    showActionModal('Initiate Singularity Drive', 'Prepare for launch! This would lead to your cosmic registration.');
                });
            }

            if (getStartedBtn) {
                getStartedBtn.addEventListener('click', () => {
                    showSection('features-section-inner'); // "Commence Mission" can scroll to features
                    showActionModal('Mission Briefing', 'Your journey begins! Navigating to the cosmic capabilities section.');
                });
            }

            if (learnMoreBtn) {
                learnMoreBtn.addEventListener('click', () => {
                    showSection('about'); // "Learn More" can go to the about section
                    showActionModal('About the Cosmos', 'Unveiling our origin story. Proceeding to the About Us page.');
                });
            }

            // Event Listeners for Navigation Links (SPA behavior)
            navLinks.forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault(); // Prevent default link behavior
                    const targetId = event.target.getAttribute('href').substring(1); // Get section ID from href
                    // Special handling for 'home' to map to 'home-section'
                    const actualTargetId = targetId === 'home' ? 'home-section' : targetId;
                    showSection(actualTargetId);
                });
            });

            // Event Listeners for General Modal Close Buttons
            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', hideActionModal);
            }
            if (modalOkBtn) {
                modalOkBtn.addEventListener('click', hideActionModal);
            }

            // Close general modal if clicking outside the content
            if (actionModal) {
                actionModal.addEventListener('click', (event) => {
                    if (event.target === actionModal) {
                        hideActionModal();
                    }
                });
            }

            // --- Quiz Page Logic ---

            // Open Quiz button listener
            if (openQuizBtn) {
                openQuizBtn.addEventListener('click', () => {
                    showSection('quiz-page-section'); // Show the dedicated quiz page
                    renderQuiz(); // Render quiz questions when showing the page
                });
            }

            /**
             * Renders the quiz questions and options into the HTML.
             */
            function renderQuiz() {
                quizContainer.innerHTML = ''; // Clear previous questions
                quizQuestions.forEach((q, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.classList.add('question-card', 'p-6', 'rounded-xl', 'shadow-md', 'mb-6', 'border', 'border-indigo-800', 'hover:border-indigo-600', 'transition-all');
                    questionDiv.innerHTML = `
                        <p class="text-xl md:text-2xl font-medium mb-4 text-purple-300">${q.question}</p>
                        <div class="options space-y-3">
                            ${q.options.map((option, optIndex) => `
                                <label class="block text-gray-200 hover:text-white transition-colors duration-200 text-lg">
                                    <input type="radio" name="question${index}" value="${option}" class="mr-3">
                                    ${option}
                                </label>
                            `).join('')}
                        </div>
                    `;
                    quizContainer.appendChild(questionDiv);
                });
                // Ensure the quiz container is visible and results are hidden when rendering a new quiz
                quizContainer.classList.remove('hidden');
                submitQuizButton.classList.remove('hidden');
                resultsContainer.classList.add('hidden');
            }

            /**
             * Calculates the score and displays results.
             */
            function showResults() {
                let score = 0;
                feedbackDetails.innerHTML = ''; // Clear previous feedback

                quizQuestions.forEach((q, index) => {
                    // Correctly scope the query selector to the quizContainer for its radio buttons
                    const selectedInput = quizContainer.querySelector(`input[name="question${index}"]:checked`);
                    const userAnswer = selectedInput ? selectedInput.value : null;

                    const feedbackDiv = document.createElement('div');
                    feedbackDiv.classList.add('p-3', 'rounded-lg', 'border', 'mb-2');

                    if (userAnswer === q.answer) {
                        score++;
                        feedbackDiv.classList.add('bg-green-900', 'bg-opacity-50', 'border-green-700');
                        feedbackDiv.innerHTML = `<p class="font-bold text-green-300">✅ Correct! </p><p class="text-sm text-gray-300">${q.question} <br> Your Answer: ${userAnswer}</p>`;
                    } else {
                        feedbackDiv.classList.add('bg-red-900', 'bg-opacity-50', 'border-red-700');
                        feedbackDiv.innerHTML = `
                            <p class="font-bold text-red-300">❌ Incorrect!</p>
                            <p class="text-sm text-gray-300">${q.question}</p>
                            <p class="text-sm text-gray-300">Your Answer: <span class="font-semibold">${userAnswer || 'No Answer'}</span></p>
                            <p class="text-sm text-gray-300">Correct Answer: <span class="font-semibold text-green-400">${q.answer}</span></p>
                        `;
                    }
                    feedbackDetails.appendChild(feedbackDiv);
                });

                scoreDisplay.textContent = `${score} out of ${quizQuestions.length}`;
                resultsContainer.classList.remove('hidden');
                quizContainer.classList.add('hidden'); // Hide quiz after submission
                submitQuizButton.classList.add('hidden'); // Hide submit button
                resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' }); // Scroll to results
            }

            /**
             * Resets the quiz for a new attempt.
             */
            function retakeQuiz() {
                // Correctly scope the query selector to the quizContainer for its radio buttons
                quizContainer.querySelectorAll('input[type="radio"]').forEach(radio => {
                    radio.checked = false;
                });

                resultsContainer.classList.add('hidden'); // Hide results
                quizContainer.classList.remove('hidden'); // Show quiz
                submitQuizButton.classList.remove('hidden'); // Show submit button
                feedbackDetails.innerHTML = ''; // Clear feedback
                quizPageSection.scrollTop = 0; // Scroll the quiz page section content to top
                quizPageSection.scrollIntoView({ behavior: 'smooth', block: 'start' }); // Scroll parent section to top
            }

            // Event Listeners for Quiz buttons
            submitQuizButton.addEventListener('click', showResults);
            retakeQuizButton.addEventListener('click', retakeQuiz);


            // Audio control logic: Autoplay with fallback for user interaction
            const playAudioWithFallback = () => {
                backgroundMusic.play().then(() => {
                    console.log("Audio started playing successfully.");
                    // Remove listeners once audio is playing
                    document.body.removeEventListener('click', playAudioWithFallback);
                    document.body.removeEventListener('scroll', playAudioWithFallback);
                }).catch(error => {
                    console.warn("Audio autoplay blocked, waiting for user interaction:", error);
                    // Add listeners for interaction if autoplay failed
                    // Ensure listeners are added only once if they failed initially
                    if (!document.body.hasAttribute('data-audio-listener-added')) {
                        document.body.addEventListener('click', playAudioWithFallback, { once: true });
                        document.body.addEventListener('scroll', playAudioWithFallback, { once: true });
                        document.body.setAttribute('data-audio-listener-added', 'true');
                    }
                });
            };

            // Attempt to play audio immediately when the script loads
            playAudioWithFallback();


            // --- Three.js Rippling Stars Effect ---
            let scene, camera, renderer, points, material;
            let mouseX = 0, mouseY = 0; // Mouse position for camera control
            let isDragging = false;
            let previousMouseX = 0;
            let previousMouseY = 0;

            const canvas = document.getElementById('threeJsCanvas');
            let animationFrameId; // To store the requestAnimationFrame ID

            const boxSize = 30; // Spread stars within a larger box to fill viewport


            const initThreeJs = () => {
                const width = window.innerWidth;
                const height = window.innerHeight;

                scene = new THREE.Scene();

                camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 100);
                camera.position.z = 10;

                renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });
                renderer.setSize(width, height);
                renderer.setPixelRatio(window.devicePixelRatio);
                renderer.setClearAlpha(0);

                const numStars = 15000;
                const positions = new Float32Array(numStars * 3);
                const sizes = new Float32Array(numStars);
                const colors = new Float32Array(numStars * 3);

                const starColors = [
                    new THREE.Color(0xffffff), // White
                    new THREE.Color(0xadd8e6), // Light blue
                    new THREE.Color(0xffe4b5), // Moccasin (pale yellow)
                    new THREE.Color(0xd8bfd8), // Thistle (pale purple)
                    new THREE.Color(0xffa07a)  // Light salmon (orange-pink)
                ];

                for (let i = 0; i < numStars; i++) {
                    positions[i * 3] = (Math.random() * 2 - 1) * boxSize;
                    positions[i * 3 + 1] = (Math.random() * 2 - 1) * boxSize;
                    positions[i * 3 + 2] = (Math.random() * 2 - 1) * boxSize;

                    sizes[i] = Math.random() * 0.8 + 0.2;

                    const color = starColors[Math.floor(Math.random() * starColors.length)];
                    colors[i * 3] = color.r;
                    colors[i * 3 + 1] = color.g;
                    colors[i * 3 + 2] = color.b;
                }

                const geometry = new THREE.BufferGeometry();
                geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
                geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));
                geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

                material = new THREE.ShaderMaterial({
                    uniforms: {
                        time: { value: 0.0 },
                        resolution: { value: new THREE.Vector2(width, height) },
                        baseColor: { value: new THREE.Color(0xbb86fc) },
                        waveColor: { value: new THREE.Color(0x82aaff) },
                        boxSize: { value: boxSize }
                    },
                    vertexShader: `
                        uniform float time;
                        uniform float boxSize;
                        attribute float size;
                        attribute vec3 color;
                        varying vec3 vColor;
                        varying float vOpacity;

                        void main() {
                            vColor = color;

                            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);

                            float rippleStrength = 1.5;
                            float rippleSpeed = 0.5;
                            float rippleFreqX = 0.7;
                            float rippleFreqY = 0.9;

                            float displacementZ = 0.0;
                            displacementZ += sin(position.x * rippleFreqX + time * rippleSpeed) * rippleStrength * 0.5;
                            displacementZ += cos(position.y * rippleFreqY + time * rippleSpeed * 0.7) * rippleStrength * 0.4;
                            displacementZ += sin((position.x + position.y) * 0.5 + time * rippleSpeed * 1.2) * rippleStrength * 0.3;

                            mvPosition.z += displacementZ;

                            gl_PointSize = size * (300.0 / -mvPosition.z);

                            vOpacity = 1.0;
                            if (mvPosition.z > -1.0) vOpacity *= smoothstep(0.0, 1.0, (-mvPosition.z - 0.5) * 2.0);
                            if (mvPosition.z < -boxSize + 5.0) vOpacity *= smoothstep(0.0, 1.0, (mvPosition.z + boxSize - 5.0) / 5.0);


                            gl_Position = projectionMatrix * mvPosition;
                        }
                    `,
                    fragmentShader: `
                        uniform sampler2D pointTexture;
                        uniform vec3 baseColor;
                        uniform vec3 waveColor;
                        uniform float time;
                        varying vec3 vColor;
                        varying float vOpacity;

                        void main() {
                            float r = distance(gl_PointCoord, vec2(0.5, 0.5));
                            if (r > 0.5) discard;

                            float strength = 1.0 - r * 2.0;
                            strength = pow(strength, 2.0);

                            vec3 finalStarColor = vColor * strength;
                            float sparkle = sin(vColor.r * 10.0 + time * 5.0) * 0.2 + 0.8;
                            finalStarColor *= sparkle;

                            gl_FragColor = vec4(finalStarColor, strength * vOpacity * 0.2);
                        }
                    `,
                    transparent: true,
                    blending: THREE.AdditiveBlending,
                    depthWrite: false
                });

                points = new THREE.Points(geometry, material);
                scene.add(points);

                document.addEventListener('mousemove', (event) => {
                    mouseX = (event.clientX / window.innerWidth) * 2 - 1;
                    mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
                });

                canvas.addEventListener('mousedown', (event) => {
                    isDragging = true;
                    previousMouseX = event.clientX;
                    previousMouseY = event.clientY;
                });

                canvas.addEventListener('mouseup', () => {
                    isDragging = false;
                });

                canvas.addEventListener('mousemove', (event) => {
                    if (isDragging) {
                        const deltaX = event.clientX - previousMouseX;
                        const deltaY = event.clientY - previousMouseY;

                        const rotationSpeed = 0.005;
                        const angleY = deltaX * rotationSpeed;
                        const angleX = deltaY * rotationSpeed;

                        const spherical = new THREE.Spherical().setFromVector3(camera.position);

                        spherical.theta -= angleY;
                        spherical.phi -= angleX;

                        spherical.phi = Math.max(0.1, Math.min(Math.PI - 0.1, spherical.phi));

                        camera.position.setFromSpherical(spherical);
                        camera.lookAt(new THREE.Vector3(0, 0, 0));

                        previousMouseX = event.clientX;
                        previousMouseY = event.clientY;
                    }
                });
            };

            const animate = () => {
                animationFrameId = requestAnimationFrame(animate);

                if (material) {
                    material.uniforms.time.value += 0.005;
                }

                if (camera && !isDragging) {
                     camera.position.x += (mouseX * 2 - camera.position.x) * 0.005;
                     camera.position.y += (mouseY * 2 - camera.position.y) * 0.005;
                     camera.lookAt(new THREE.Vector3(0,0,0));
                }

                if (renderer && scene && camera) {
                    renderer.render(scene, camera);
                }
            };

            const onWindowResize = () => {
                if (camera && renderer) {
                    const width = window.innerWidth;
                    const height = window.innerHeight;
                    camera.aspect = width / height;
                    camera.updateProjectionMatrix();
                    renderer.setSize(width, height);
                    if (material && material.uniforms.resolution) {
                        material.uniforms.resolution.value.set(width, height);
                    }
                }
            };

            window.onload = function () {
                initThreeJs();
                animate();
            };

            window.addEventListener('resize', onWindowResize);

            window.addEventListener('beforeunload', () => {
                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                }
                if (renderer) {
                    renderer.dispose();
                }
                if (scene) {
                    scene.clear();
                }
            });
        });
    </script>
</body>
</html>
